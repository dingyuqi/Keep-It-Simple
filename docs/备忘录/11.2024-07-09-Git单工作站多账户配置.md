---
title: Git单工作站多账户配置
createTime: 2024/07/09 10:47:19
tags:
  - Git
permalink: /article/0cc4oukj/
---

很多时候程序员都会有多个Git账户, 也许你想要把工作和个人开发账户分开, 这个时候就涉及到在同一个工作站(主机)上对多个Git账户进行操作. 我参考了很多做法, 找到了目前的一个解决方案. 不是太完美, 因为实测过程中发现**需要在每个项目第一次使用时配置一次用户名和邮箱**.


<svg height=100 width=100 xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128"><path fill="#F34F29" d="M124.737 58.378L69.621 3.264c-3.172-3.174-8.32-3.174-11.497 0L46.68 14.71l14.518 14.518c3.375-1.139 7.243-.375 9.932 2.314 2.703 2.706 3.461 6.607 2.294 9.993l13.992 13.993c3.385-1.167 7.292-.413 9.994 2.295 3.78 3.777 3.78 9.9 0 13.679a9.673 9.673 0 01-13.683 0 9.677 9.677 0 01-2.105-10.521L68.574 47.933l-.002 34.341a9.708 9.708 0 012.559 1.828c3.778 3.777 3.778 9.898 0 13.683-3.779 3.777-9.904 3.777-13.679 0-3.778-3.784-3.778-9.905 0-13.683a9.65 9.65 0 013.167-2.11V47.333a9.581 9.581 0 01-3.167-2.111c-2.862-2.86-3.551-7.06-2.083-10.576L41.056 20.333 3.264 58.123a8.133 8.133 0 000 11.5l55.117 55.114c3.174 3.174 8.32 3.174 11.499 0l54.858-54.858a8.135 8.135 0 00-.001-11.501z"/></svg>

<!-- more -->

首先, 我们先假设我们需要配置的两个Git账户如下:

| 账号 | username | email           | 网站   |
| ---- | -------- | --------------- | ------ |
| 1    | alice    | alice@gmail.com | Gitlab |
| 2    | bob      | bob@163.com     | GitHub |

## 1. 生成公私钥
使用管理员身份运行Git Bash:
```bash
## 1) 生成alice在Gitlab上的公私钥文件
ssh-keygen -t rsa -f ~/.ssh/id_rsa_gitlab -C "alice@gmail.com" 

## 2）生成bob在GitHub上的公私钥文件
ssh-keygen -t rsa -f ~/.ssh/id_rsa_github -C "bob@163.com" 

```
执行完这两个命令后可以在`C:\\用户\\<username>\\.ssh`路径下找到4个文件, 分别是两个账户的公钥和私钥.

| 序号 | 文件名            | 含义        |
| ---- | ----------------- | ----------- |
| 1    | id_rsa_gitlab     | alice的私钥 |
| 2    | id_rsa_gitlab.pub | alice的公钥 |
| 3    | id_rsa_github     | bob的私钥   |
| 4    | id_rsa_github.pub | bob的公钥   |

## 2. 配置公钥
分别登录进入Gitlab和GitHub进行公钥的配置. 在设置中找到`SSH Key`的相关设置, 点击`New SSH key`, 将公钥文件中的内容复制添加到里面.

## 3. 激活公钥
在Git Bash中执行:
### Gitlab
```bash
## 1) 激活公钥
ssh -T git@gitlab.com -i ~/.ssh/id_rsa_gitlab

## 2)授权
yes
```
### GitHub
```bash
## 1) 激活公钥
ssh -T git@github.com -i ~/.ssh/id_rsa_github

## 2) 授权
yes
```

## 4. 添加私钥文件

```bash
## 1) 打开服务
eval `ssh-agent`
## 2) 添加Gitlab
ssh-add ~/.ssh/id_rsa_gitee
## 3) 添加GitHub
ssh-add ~/.ssh/id_rsa_github
```

## 5. 配置config文件
config文件, 一般保存在~/.ssh/目录里, 用于切换多个gitee、github账号.
==将config文件中关于username和email的global配置删除,== 然后改为以下内容:
```text
Host gitlab.com
HostName gitlab.com
IdentityFile C:\\用户\\<username>\\.ssh\\id_rsa_gitlab
PreferredAuthentications publickey
User alice


Host github.com
HostName github.com
IdentityFile C:\\用户\\<username>\\.ssh\\id_rsa_github
PreferredAuthentications publickey
User bob
```


::: note 本文参考资料
1. [使用Git bash切换Gitee、GitHub多个Git账号](https://www.cnblogs.com/gaogao-web/p/18186974)
:::